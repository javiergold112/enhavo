services:
    enhavo_workflow_workflow:
        class: %enhavo_workflow.form.type.workflow.class%
        tags:
            - { name: form.type }

    enhavo_workflow_node:
        class: %enhavo_workflow.form.type.node.class%
        tags:
            - { name: form.type }

    enhavo_workflow_transition:
        class: %enhavo_workflow.form.type.transition.class%
        tags:
            - { name: form.type }

    security.authentication.voter.workflow_voter:
        class:      Enhavo\Bundle\WorkflowBundle\Security\Authentication\Voter\WorkflowVoter
        public:     false
        arguments:
            - '@doctrine.orm.entity_manager'
        tags:
            - { name: security.voter }

    enhavo_workflow.delete_listener:
        class: Enhavo\Bundle\WorkflowBundle\EventListener\DeleteListener
        arguments:
            - @doctrine.orm.entity_manager
        tags:
            - { name: kernel.event_listener, event: enhavo_app.delete, method: onDelete }

    validator.no_nodes_created_validator:
        class:  Enhavo\Bundle\WorkflowBundle\Validator\Constraints\WorkflowValidator
        arguments:
            - @doctrine.orm.default_entity_manager
            - @service_container
        tags:
            - { name: validator.constraint_validator, alias: no_nodes_created }