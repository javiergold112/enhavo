parameters:
    enhavo_admin.form.wysiwyg.class: Enhavo\Bundle\AdminBundle\Form\Type\WysiwygType
    security.roles.provider.class: Enhavo\Bundle\AdminBundle\Security\Roles\AdminRolesProvider
    enhavo_admin.form.config.wysiwyg.class: Enhavo\Bundle\AdminBundle\Form\Config\WysiwygConfig
    enhavo_admin.menu_loader.class: Enhavo\Bundle\AdminBundle\Menu\MenuLoader

services:
    enhavo_admin.form.wysiwyg:
        class: %enhavo_admin.form.wysiwyg.class%
        arguments:
            - @enhavo_admin.form.config.wysiwyg
        tags:
            - { name: form.type, alias: 'wysiwyg' }

    enhavo_admin.form.config.wysiwyg:
        class: %enhavo_admin.form.config.wysiwyg.class%
        arguments:
            - %kernel.root_dir%/config/wysiwyg.yml

    cache:
        class: Doctrine\Common\Cache\PhpFileCache
        arguments: [%kernel.cache_dir%]

    security.roles.provider:
        class: %security.roles.provider.class%
        arguments:
            - %security.role_hierarchy.roles%

    enhavo_admin.menu_event_listener:
        class: Enhavo\Bundle\AdminBundle\EventListener\MenuEventListener
        arguments:
            - %enhavo_admin.permission_check%
            - @security.context
            - @knp_menu.factory
            - %enhavo_admin.menu%
            - @request_stack
        tags:
          - { name: kernel.event_listener, event: enhavo_admin.menu, method: onMenu  }

    enhavo_admin.controller.app:
        class: Enhavo\Bundle\AdminBundle\Controller\AppController
        calls:
            - [setContainer, [@service_container]]

    enhavo_admin.menu_loader:
        class: %enhavo_admin.menu_loader.class%
        arguments:
            - 'enhavo_admin.menu'
            - %enhavo_admin.menu%
            - @knp_menu.factory
            - @event_dispatcher

    enhavo_admin.generator.route_generator:
        class: Enhavo\Bundle\AdminBundle\Generator\RoutingGenerator
        arguments:
            - @templating